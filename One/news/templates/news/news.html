{% extends 'main/layout.html' %}

{% block title %}
    <title>Новостная страница</title>
{% endblock %}

{% block content %}
    <h1>Тут всякие новости</h1>

    {% for new in news %}
      <div>
        <h3>{{ new.title }}</h3>
        <p>Автор: {{ new.author.username }}</p>
        <p>Опубликовано: {{ new.pub_date }}</p>
        <p onclick="toggleDescription(this)" data-full-text="{{ new.text }}">
            {{ new.short_description }}
        </p>
      </div>
    {% endfor %}

    <script>
        function toggleDescription(element) {
            const fullText = element.getAttribute('data-full-text');
            if (element.innerText === fullText) {
                element.innerText = element.getAttribute('data-short-text');
            } else {
                element.setAttribute('data-short-text', element.innerText);
                element.innerText = fullText;
            }
        }
    </script>
{% endblock %}
